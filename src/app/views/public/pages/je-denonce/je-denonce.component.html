<section class="relative bg-gradient-to-br from-[#11845A] via-[#023E79] to-[#162233] text-white min-h-screen py-16">
  <!-- Background Patterns -->
  <div class="absolute inset-0 opacity-10">
    <div class="absolute top-20 left-20 w-32 h-32 bg-white rounded-full blur-3xl"></div>
    <div class="absolute bottom-20 right-20 w-40 h-40 bg-white rounded-full blur-3xl"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-white rounded-full blur-3xl opacity-5"></div>
  </div>

  <div class="relative container mx-auto px-4 flex justify-center">
    <div class="w-full max-w-3xl">
      <!-- Header -->
      <div class="text-center mb-8">
        <h1 class="text-3xl lg:text-4xl font-bold flex items-center justify-center gap-x-2">
          <span>JE DENONCE</span>
        </h1>
        <p class="text-white/90 mt-2">
          Faites une dénonciation à l'Inspection Générale des Services et Emplois Publics
        </p>
      </div>

      <!-- Form Card -->
      <div class="bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 p-8 shadow-2xl">
        <form #usagerDenonciationform="ngForm" (ngSubmit)="save(usagerDenonciationform)">
          <!-- Nom & Prénoms -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div>
              <label for="nom" class="block text-sm font-medium mb-2">Nom <span class="text-yellow-300">*</span></label>
              <input type="text" ngModel name="nom" #nom="ngModel" id="nom" required
                class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200
                " [class.border-red-400]="nom.invalid && (nom.dirty || nom.touched)"
              />
              <div *ngIf="nom.invalid && (nom.dirty || nom.touched)" class="text-red-300 text-xs mt-1">
                Ce champ est requis
              </div>
            </div>

            <div>
              <label for="prenoms" class="block text-sm font-medium mb-2">Prénoms <span class="text-yellow-300">*</span></label>
              <input type="text" ngModel name="prenoms" #prenoms="ngModel" id="prenoms" required
                class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200
                " [class.border-red-400]="prenoms.invalid && (prenoms.dirty || prenoms.touched)"
              />
              <div *ngIf="prenoms.invalid && (prenoms.dirty || prenoms.touched)" class="text-red-300 text-xs mt-1">
                Ce champ est requis
              </div>
            </div>
          </div>

          <!-- Email & Téléphone -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div>
              <label for="email" class="block text-sm font-medium mb-2">Email <span class="text-yellow-300">*</span></label>
              <input type="email" ngModel name="email" #email="ngModel" id="email" required
                class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200
                " [class.border-red-400]="email.invalid && (email.dirty || email.touched)"
              />
              <div *ngIf="email.invalid && (email.dirty || email.touched)" class="text-red-300 text-xs mt-1">
                Ce champ est requis
              </div>
            </div>

            <div>
              <label for="phone" class="block text-sm font-medium mb-2">Téléphone <span class="text-yellow-300">*</span></label>
              <input type="text" ngModel name="phone" #phone="ngModel" id="phone" required
                class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200
                " [class.border-red-400]="phone.invalid && (phone.dirty || phone.touched)"
              />
              <div *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="text-red-300 text-xs mt-1">
                Ce champ est requis
              </div>
            </div>
          </div>

          <!-- Dropdown Ministère / Institution -->
          <div class="mb-6">
            <label for="entity" class="block text-sm font-medium mb-2">Ministère ou institution <span class="text-yellow-300">*</span></label>
            <select ngModel name="entity" #entity="ngModel" id="entity" required
              class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200
              " [class.border-red-400]="entity.invalid && (entity.dirty || entity.touched)"
            >
              <option class="text-black" value="">-- Sélectionner --</option>
              <option class="text-black" value="private-admin">Administration privée</option>
              <option class="text-black" *ngFor="let el of institutions" [value]="el.libelle">{{ el.libelle }}</option>
            </select>
            <div *ngIf="entity.invalid && (entity.dirty || entity.touched)" class="text-red-300 text-xs mt-1">
              Ce champ est requis
            </div>
          </div>

          <!-- Precision administration privée -->
          <div class="mb-6" *ngIf="select_entity==='private-admin'">
            <label for="precision_entity" class="block text-sm font-medium mb-2">Précision administration privée</label>
            <input type="text" ngModel name="precision_entity" #precision_entity="ngModel" id="precision_entity"
              class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200"
            />
          </div>

          <!-- Faits dénoncés -->
          <div class="mb-6">
            <label for="resume" class="block text-sm font-medium mb-2">Faits dénoncés <span class="text-yellow-300">*</span></label>
            <textarea ngModel name="resume" #resume="ngModel" id="resume" rows="4" required
              class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200
              " [class.border-red-400]="resume.invalid && (resume.dirty || resume.touched)"
            ></textarea>
            <div *ngIf="resume.invalid && (resume.dirty || resume.touched)" class="text-red-300 text-xs mt-1">
              Ce champ est requis
            </div>
          </div>

          <!-- Pièce jointe -->
          <div class="mb-6">
            <label for="pj" class="block text-sm font-medium mb-2">Pièce jointe</label>
            <input type="file" ngModel name="pj" #pj="ngModel" id="pj" (change)="onFileChange($event)"
              class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl text-white placeholder-white/60 focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200"
              accept=".pdf"
            />
          </div>

          <!-- Consentement -->
          <div class="mb-6">
            <label class="flex items-start gap-x-3 bg-white/10 backdrop-blur-sm rounded-lg p-4 border"
              [class.border-red-400]="has_consent?.invalid && (has_consent?.dirty || has_consent?.touched)">
              <input type="checkbox" ngModel name="has_consent" #has_consent="ngModel" required
                class="h-5 w-5 text-yellow-400 focus:ring-yellow-400 border-white/30 rounded mt-1"
              />
              <span class="text-sm text-white/90 leading-relaxed">
                Je donne librement mon consentement pour la collecte et le traitement de mes données personnelles
                <span class="text-yellow-300">*</span>
              </span>
            </label>
            <div *ngIf="has_consent.invalid && (has_consent.dirty || has_consent.touched)" class="text-red-300 text-xs mt-1">
              Vous devez accepter les conditions
            </div>
          </div>

          <!-- Submit -->
          <button type="submit" [disabled]="usagerDenonciationform.invalid || loading"
            class="w-full bg-gradient-to-r from-yellow-400 to-yellow-500 text-[#162233] py-3 px-6 rounded-xl font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-x-3">
            Envoyer
          </button>
        </form>
      </div>
    </div>
  </div>
</section>
