<!-- <div class="container">
    <div class="row">
        <div class="col-md-9 mx-auto my-2">
            <div class="card" style="border: 2px solid #0A3764">
                    <div class="card-header blueColor py-2">
                            <div class="d-flex justify-content-center">
                                    <img src="assets/auth-person.svg" height="30" class="mx-2" alt="">
                                    <h6  class="text-center text-white mt-2">

                                        <strong class="mt-2">Inscription</strong></h6>
                            </div>

                    </div>
                <div class="card-body " style="background-color:#f9f9f9">


                    <form class="mt-3" #registerForm="ngForm" (ngSubmit)="registerSend(registerForm.value)">
                        <fieldset  class="my-0">
                            <legend class="text-muted h6">Information personnelle</legend>

                            <div class="row mb-5">
                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label for="" [className]="lastname.invalid && (lastname.dirty || lastname.touched)?'text-danger':lastname.valid && lastname.dirty?'text-info':'text-gray'">Nom
                                            (*)</label>
                                        <input type="text" [className]="lastname.invalid && (lastname.dirty || lastname.touched)?'form-control border-danger':lastname.valid && lastname.dirty?'form-control border-info':'form-control '"
                                            name="lastname" #lastname="ngModel" ngModel required>
                                        <span *ngIf="lastname.invalid && (lastname.dirty || lastname.touched)" class="text-danger">
                                            <small *ngIf="lastname.errors?.['required']" id="typeLabelHelp" class="form-text">Nom
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label for="" [className]="firstname.invalid && (firstname.dirty || firstname.touched)?'text-danger':firstname.invalid?'text-gray':'text-info'">Prénoms
                                            (*)</label>
                                        <input type="text" [className]="firstname.invalid && (firstname.dirty || firstname.touched)?'form-control border-danger':firstname.invalid?'form-control':'form-control border-info'"
                                            name="firstname" #firstname="ngModel" ngModel required>
                                        <span *ngIf="firstname.invalid && (firstname.dirty || firstname.touched)" class="text-danger">
                                            <small *ngIf="firstname.errors?.['required']" id="typeLabelHelp" class="form-text">Prénoms
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label for="" [className]="birthday.invalid && (birthday.dirty || birthday.touched)?'text-danger':birthday.valid && birthday.dirty ?'text-info':'text-gray'">Date
                                            de naissance</label>
                                        <input type="date"  max="2010-12-31" [className]="birthday.invalid && (birthday.dirty || birthday.touched)?'form-control border-danger':birthday.valid && birthday.dirty ?'form-control border-info':'form-control '"
                                            name="birthday" #birthday="ngModel" ngModel>
                                        <span *ngIf="birthday.invalid && (birthday.dirty || birthday.touched)" class="text-danger">
                                            <small *ngIf="birthday.errors?.['required']" id="typeLabelHelp" class="form-text">Date
                                                de naissance requis</small>
                                        </span>
                                    </div>
                                </div>

                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label for="" [className]="phone.invalid && (phone.dirty || phone.touched)?'text-danger':phone.valid && phone.dirty ?'text-info':'text-gray'">Téléphone
                                            (*)</label>
                                        <input [className]="phone.invalid && (phone.dirty || phone.touched)?'form-control border-danger':phone.valid && phone.dirty ?'form-control border-info':'form-control '"
                                            type="tel" pattern="^\+?\s*(\d+\s?){8,}$" name="phone" #phone="ngModel"
                                            ngModel required placeholder="+22990909090">
                                        <span *ngIf="phone.invalid && (phone.dirty || phone.touched)" class="text-danger">
                                            <small *ngIf="phone.errors?.['required']" id="typeLabelHelp" class="form-text">Téléphone
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label class="text-info" for="">Je suis un </label>
                                        <select class="form-control border-info" name="status_id" #statusAgent="ngModel"
                                            [(ngModel)]="default_status" (change)="addField($event)" required>
                                            <option *ngFor="let s of status" value="{{s.id}}">{{s.name}}</option>
                                        </select>
                                        <span *ngIf="statusAgent.invalid && (statusAgent.dirty || statusAgent.touched)"
                                            class="text-danger">
                                            <small *ngIf="statusAgent.errors?.['required']" id="typeLabelHelp" class="form-text">Status
                                                requis</small>
                                        </span>
                                    </div>
                                </div>


                                <div class="col-12 col-md-6" *ngIf="isAgent">
                                    <div class="form-group" >
                                        <label for="" [className]="matricule.invalid && (matricule.dirty || matricule.touched)?'text-danger':matricule.valid && matricule.dirty ?'text-info':'text-gray'">Matricule
                                            Agent (*)</label>
                                        <input [className]="matricule.invalid && (matricule.dirty || matricule.touched)?'form-control border-danger':matricule.valid && matricule.dirty ?'form-control border-info':'form-control '"
                                            type="text" name="matricule" #matricule="ngModel" ngModel required>
                                        <span *ngIf="matricule.invalid && (matricule.dirty || matricule.touched)" class="text-danger">
                                            <small *ngIf="matricule.errors?.['required']" id="typeLabelHelp" class="form-text">Matricule
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6" *ngIf="needIfu">
                                    <div class="form-group" >
                                        <label for="" [className]="ifu.invalid && (ifu.dirty || ifu.touched)?'text-danger':ifu.valid && ifu.dirty ?'text-info':'text-gray'">N°IFU(*)</label>
                                        <input [className]="ifu.invalid && (ifu.dirty || ifu.touched)?'form-control border-danger':ifu.valid && ifu.dirty ?'form-control border-info':'form-control '"
                                            type="text" name="ifu" #ifu="ngModel" ngModel required>
                                        <span *ngIf="ifu.invalid && (ifu.dirty || ifu.touched)" class="text-danger">
                                            <small *ngIf="ifu.errors?.['required']" id="typeLabelHelp" class="form-text">N°IFU
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6"  *ngIf="needRcm">
                                    <div class="form-group">
                                        <label for="" [className]="rccm.invalid && (rccm.dirty || rccm.touched)?'text-danger':rccm.valid && rccm.dirty ?'text-info':'text-gray'">RCCM
                                            (*)</label>
                                        <input [className]="rccm.invalid && (rccm.dirty || rccm.touched)?'form-control border-danger':rccm.valid && rccm.dirty ?'form-control border-info':'form-control '"
                                            type="text" name="rccm" #rccm="ngModel" ngModel required>
                                        <span *ngIf="rccm.invalid && (rccm.dirty || rccm.touched)" class="text-danger">
                                            <small *ngIf="rccm.errors?.['required']" id="typeLabelHelp" class="form-text">RCCM
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6" *ngIf="isInstitu">
                                    <div class="form-group">
                                        <label class="text-info" for="">Ma structure </label>
                                        <select class="form-control border-info" name="institu_id" #instituAgent="ngModel"
                                            [(ngModel)]="default_Institu" required>
                                            <option *ngFor="let s of struct" value="{{s.id}}">{{s.libelle}}</option>
                                        </select>
                                        <span *ngIf="instituAgent.invalid && (instituAgent.dirty || instituAgent.touched)"
                                            class="text-danger">
                                            <small *ngIf="instituAgent.errors?.['required']" id="typeLabelHelp" class="form-text">Status
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <legend class="text-muted h6 text-center">Information du compte</legend>

                        <hr class="mt-0 mb-3">
                        <fieldset class="my-0">
                            <div class="row mb-5">
                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label for="" [className]="email.invalid && (email.dirty || email.touched)?'text-danger':email.valid && email.dirty ?'text-info':'text-gray'">Email
                                            (*)</label>
                                        <input type="email" [className]="email.invalid && (email.dirty || email.touched)?'form-control border-danger':email.valid && email.dirty ?'form-control border-info':'form-control '"
                                            name="email" #email="ngModel" ngModel email="true">

                                        <span *ngIf="email.invalid && (email.dirty || email.touched)" class="text-danger">
                                            <small *ngIf="email.errors?.['required']" id="typeLabelHelp" class="form-text">Email
                                                requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label for="">Mot de passe (Au moins 6 caractères) </label>
                                        <input type="password" class="form-control" name="password" #password="ngModel"
                                            ngModel>
                                        <span *ngIf="password.invalid && (password.dirty || password.touched)" class="text-danger">
                                            <small *ngIf="password.errors?.['required']" id="typeLabelHelp" class="form-text">Mot
                                                de passe requis</small>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="form-group">
                                        <label for="">Confirmer mot de passe </label>
                                        <input type="password" class="form-control" name="password_confirmation"
                                            #confirm_password="ngModel" ngModel>
                                        <span *ngIf="confirm_password.invalid && (confirm_password.dirty || confirm_password.touched)"
                                            class="text-danger">
                                            <small *ngIf="confirm_password.errors?.['required']" id="typeLabelHelp" class="form-text">Mot
                                                de passe requis</small>
                                        </span>
                                    </div>
                                </div>

                            </div>
                        </fieldset>
                        <div class="form-group form-check">
                            <input type="checkbox"  class="form-check-input" ngModel  name="confidfor" required id="confidfor">
                            <label  class="form-check-label" for="confidfor">Je donne librement mon consentement pour la collecte de mes données personnelles</label>
                        </div>
                        <div class="d-flex justify-content-center mb-3">
                            <button class="btn btn-warning" [disabled]="registerForm.invalid || loading">S'inscrire</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>

    </div>
</div> -->

<section
  class="relative bg-gradient-to-br from-[#11845A] via-[#023E79] to-[#162233] text-white overflow-hidden min-h-screen">
  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-10">
    <div class="absolute top-20 left-20 w-32 h-32 bg-white rounded-full blur-3xl"></div>
    <div class="absolute bottom-20 right-20 w-40 h-40 bg-white rounded-full blur-3xl"></div>
    <div
      class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-white rounded-full blur-3xl opacity-5">
    </div>
  </div>

  <div class="relative container mx-auto px-4 py-16 lg:py-16 flex items-center justify-center min-h-screen">
    <div class="w-full max-w-2xl">
      <!-- Header -->
      <div class="text-center mb-8">
        <h1 class="text-3xl lg:text-4xl font-bold flex items-center text-center justify-center gap-x-2">
          <span>Créer un </span>
          <span class="bg-gradient-to-r from-yellow-300 to-yellow-500 bg-clip-text text-transparent">
            Compte
          </span>
        </h1>
        <p class="text-white/90 leading-relaxed">
          Rejoignez notre plateforme pour accéder à tous nos services
        </p>
      </div>

      <!-- Stepper -->
      <div class="mb-8">
        <div class="flex items-center justify-center gap-x-4">
          <div class="flex items-center">
            <div [class]="
                    'w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 ' +
                    (currentStep === 1
                      ? 'bg-yellow-400 text-[#162233]'
                      : 'bg-white/20 text-white')
                  ">
              1
            </div>
            <span [class]="
                    'ml-2 text-sm font-medium ' +
                    (currentStep === 1 ? 'text-yellow-300' : 'text-white/60')
                  ">
              Informations personnelles
            </span>
          </div>
          <div class="w-12 h-0.5 bg-white/30"></div>
          <div class="flex items-center">
            <div [class]="
                    'w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold transition-all duration-300 ' +
                    (currentStep === 2
                      ? 'bg-yellow-400 text-[#162233]'
                      : 'bg-white/20 text-white')
                  ">
              2
            </div>
            <span [class]="
                    'ml-2 text-sm font-medium ' +
                    (currentStep === 2 ? 'text-yellow-300' : 'text-white/60')
                  ">
              Informations du compte
            </span>
          </div>
        </div>
      </div>

      <!-- Registration Form -->
      <div class="bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20 p-8 shadow-2xl">
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <!-- Step 1: Personal Information -->
          <div *ngIf="currentStep === 1" class="gap-y-6">
            <h3 class="text-lg font-semibold text-yellow-300 mb-6 flex items-center gap-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24">
                <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                  <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </g>
              </svg>
              <span>Informations personnelles</span>
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Nom -->
              <div>
                <label for="lastname" class="block text-sm font-medium text-white/90 mb-2">
                  Nom <span class="text-yellow-300">*</span>
                </label>
                <input type="text" id="lastname" formControlName="lastname" [class]="
                        'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                        (isFieldInvalid('lastname')
                          ? 'border-red-400'
                          : 'border-white/30')
                      " placeholder="Votre nom" />
                <div *ngIf="isFieldInvalid('lastname')" class="text-red-300 text-xs mt-1">
                  Le nom est requis
                </div>
              </div>

              <!-- Prénoms -->
              <div>
                <label for="firstname" class="block text-sm font-medium text-white/90 mb-2">
                  Prénoms <span class="text-yellow-300">*</span>
                </label>
                <input type="text" id="firstname" formControlName="firstname" [class]="
                        'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                        (isFieldInvalid('firstname')
                          ? 'border-red-400'
                          : 'border-white/30')
                      " placeholder="Vos prénoms" />
                <div *ngIf="isFieldInvalid('firstname')" class="text-red-300 text-xs mt-1">
                  Les prénoms sont requis
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Date de naissance -->
              <div>
                <label for="birthday" class="block text-sm font-medium text-white/90 mb-2">
                  Date de naissance
                </label>
                <input type="date" id="birthday" formControlName="birthday"
                  class="w-full px-4 py-3 bg-white/20 backdrop-blur-sm border border-white/30 rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white" />
              </div>

              <!-- Téléphone -->
              <div>
                <label for="phone" class="block text-sm font-medium text-white/90 mb-2">
                  Téléphone <span class="text-yellow-300">*</span>
                </label>
                <input type="tel" id="phone" formControlName="phone" [class]="
                        'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                        (isFieldInvalid('phone')
                          ? 'border-red-400'
                          : 'border-white/30')
                      " placeholder="+22901XXXXXXXX" />
                <div *ngIf="isFieldInvalid('phone')" class="text-red-300 text-xs mt-1">
                  <span *ngIf="registerForm.get('phone')?.errors?.['required']">Le téléphone est requis</span>
                  <span *ngIf="registerForm.get('phone')?.errors?.['pattern']">Format de téléphone invalide</span>
                </div>
              </div>
            </div>

            <!-- Type d'utilisateur -->
            <div>
              <label class="block text-sm font-medium text-white/90 mb-3">Je suis un <span
                  class="text-yellow-300">*</span></label>
              <div class="flex flex-wrap gap-3">
                <label *ngFor="let type of status"
                  class="flex items-center bg-white/10 backdrop-blur-sm rounded-lg px-4 py-3 border border-white/20 hover:bg-white/20 transition-all cursor-pointer">
                  <p-radioButton [inputId]="type.id" (onClick)="addField($event)" [value]="type.id"
                    formControlName="status_id" />
                  <span class="ml-2 text-white">{{type?.name}}</span>
                </label>

              </div>
              <div *ngIf="isFieldInvalid('status_id')" class="text-red-300 text-xs mt-1">
                Veuillez sélectionner un type d'utilisateur
              </div>
            </div>

            <div *ngIf="isAgent" class="grid grid-cols-1 md:grid-cols-2 gap-4">

              <div>
                <label for="matricule" class="block text-sm font-medium text-white/90 mb-2">
                  Matricule Agent <span class="text-yellow-300">*</span>
                </label>
                <input type="text" id="matricule" formControlName="matricule" [class]="
                        'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                        (isFieldInvalid('matricule')
                          ? 'border-red-400'
                          : 'border-white/30')
                      " placeholder="Votre nom" />
                <div *ngIf="isFieldInvalid('matricule')" class="text-red-300 text-xs mt-1">
                  Le Matricule Agent est requis
                </div>
              </div>

              <div>
                <label for="default_Institu" class="block text-sm font-medium text-white/90 mb-2">
                  Ma structure <span class="text-yellow-300">*</span>
                </label>
                <input type="text" id="default_Institu" formControlName="default_Institu" [class]="
                        'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                        (isFieldInvalid('default_Institu')
                          ? 'border-red-400'
                          : 'border-white/30')
                      " placeholder="Vos prénoms" />
                <div *ngIf="isFieldInvalid('default_Institu')" class="text-red-300 text-xs mt-1">
                  La structure sont requise
                </div>
              </div>
            </div>
            <div *ngIf="needIfu || needRcm" class="grid grid-cols-1 md:grid-cols-2 gap-4">

              <div *ngIf="needIfu">
                <label for="ifu" class="block text-sm font-medium text-white/90 mb-2">
                  N° IFU <span class="text-yellow-300">*</span>
                </label>
                <input type="text" id="ifu" formControlName="ifu" [class]="
                        'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                        (isFieldInvalid('nom')
                          ? 'border-red-400'
                          : 'border-white/30')
                      " placeholder="Votre nom" />
                <div *ngIf="isFieldInvalid('ifu')" class="text-red-300 text-xs mt-1">
                  Le N°IFU est requis
                </div>
              </div>

              <!-- Prénoms -->
              <div *ngIf="needRcm">
                <label for="rccm" class="block text-sm font-medium text-white/90 mb-2">
                  RCCM <span class="text-yellow-300">*</span>
                </label>
                <input type="text" id="rccm" formControlName="rccm" [class]="
                        'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                        (isFieldInvalid('rccm')
                          ? 'border-red-400'
                          : 'border-white/30')
                      " placeholder="Vos prénoms" />
                <div *ngIf="isFieldInvalid('rccm')" class="text-red-300 text-xs mt-1">
                  Les prénoms sont requis
                </div>
              </div>
            </div>



            <!-- Next Button -->
            <div class="flex justify-end">
              <button type="button" (click)="nextStep()" [disabled]="!isStep1Valid()"
                class="group bg-gradient-to-r from-yellow-400 to-yellow-500 text-[#162233] py-3 px-6 rounded-xl font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-x-3">
                <span>Suivant</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 group-hover:translate-x-1 transition-transform"
                  viewBox="0 0 24 24">
                  <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" d="M5 12h14m-7-7l7 7l-7 7" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Step 2: Account Information -->
          <div *ngIf="currentStep === 2" class="gap-y-6">
            <h3 class="text-lg font-semibold text-yellow-300 mb-6 flex items-center gap-x-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24">
                <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                  <rect width="18" height="11" x="3" y="11" rx="2" ry="2" />
                  <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                </g>
              </svg>
              <span>Informations du compte</span>
            </h3>

            <!-- Email -->
            <div>
              <label for="email" class="block text-sm font-medium text-white/90 mb-2">
                Email <span class="text-yellow-300">*</span>
              </label>
              <input type="email" id="email" formControlName="email" [class]="
                      'w-full px-4 py-3 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                      (isFieldInvalid('email')
                        ? 'border-red-400'
                        : 'border-white/30')
                    " placeholder="votre.email@exemple.com" />
              <div *ngIf="isFieldInvalid('email')" class="text-red-300 text-xs mt-1">
                <span *ngIf="registerForm.get('email')?.errors?.['required']">L'email est requis</span>
                <span *ngIf="registerForm.get('email')?.errors?.['email']">Format d'email invalide</span>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Mot de passe -->
              <div>
                <label for="password" class="block text-sm font-medium text-white/90 mb-2">
                  Mot de passe <span class="text-yellow-300">*</span>
                  <span class="text-xs text-white/60">(Au moins 6 caractères)</span>
                </label>
                <div class="relative">
                  <input [type]="showPassword ? 'text' : 'password'" id="password" formControlName="password" [class]="
                          'w-full px-4 py-3 pr-12 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                          (isFieldInvalid('password')
                            ? 'border-red-400'
                            : 'border-white/30')
                        " placeholder="Votre mot de passe" />
                  <button type="button" (click)="togglePasswordVisibility()"
                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors">
                    <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24">
                      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="2">
                        <path
                          d="M2.062 12.348a1 1 0 0 1 0-.696a10.75 10.75 0 0 1 19.876 0a1 1 0 0 1 0 .696a10.75 10.75 0 0 1-19.876 0" />
                        <circle cx="12" cy="12" r="3" />
                      </g>
                    </svg>
                    <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24">
                      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="2">
                        <path
                          d="M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575a1 1 0 0 1 0 .696a10.8 10.8 0 0 1-1.444 2.49m-6.41-.679a3 3 0 0 1-4.242-4.242" />
                        <path
                          d="M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151a1 1 0 0 1 0-.696a10.75 10.75 0 0 1 4.446-5.143M2 2l20 20" />
                      </g>
                    </svg>
                  </button>
                </div>
                <div *ngIf="isFieldInvalid('password')" class="text-red-300 text-xs mt-1">
                  <span *ngIf="registerForm.get('password')?.errors?.['required']">Le mot de passe est requis</span>
                  <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Le mot de passe doit contenir au
                    moins 6
                    caractères</span>
                </div>
              </div>

              <!-- Confirmer mot de passe -->
              <div>
                <label for="confirmPassword" class="block text-sm font-medium text-white/90 mb-2">
                  Confirmer mot de passe
                  <span class="text-yellow-300">*</span>
                </label>
                <div class="relative">
                  <input [type]="showConfirmPassword ? 'text' : 'password'" id="confirmPassword"
                    formControlName="confirmPassword" [class]="
                          'w-full px-4 py-3 pr-12 bg-white/20 backdrop-blur-sm border rounded-xl focus:ring-2 focus:ring-yellow-400 focus:border-transparent transition-all duration-200 text-white placeholder-white/60 ' +
                          (isFieldInvalid('confirmPassword')
                            ? 'border-red-400'
                            : 'border-white/30')
                        " placeholder="Confirmez votre mot de passe" />
                  <button type="button" (click)="toggleConfirmPasswordVisibility()"
                    class="absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white transition-colors">
                    <svg *ngIf="!showConfirmPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                      viewBox="0 0 24 24">
                      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="2">
                        <path
                          d="M2.062 12.348a1 1 0 0 1 0-.696a10.75 10.75 0 0 1 19.876 0a1 1 0 0 1 0 .696a10.75 10.75 0 0 1-19.876 0" />
                        <circle cx="12" cy="12" r="3" />
                      </g>
                    </svg>
                    <svg *ngIf="showConfirmPassword" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                      viewBox="0 0 24 24">
                      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                        stroke-width="2">
                        <path
                          d="M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575a1 1 0 0 1 0 .696a10.8 10.8 0 0 1-1.444 2.49m-6.41-.679a3 3 0 0 1-4.242-4.242" />
                        <path
                          d="M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151a1 1 0 0 1 0-.696a10.75 10.75 0 0 1 4.446-5.143M2 2l20 20" />
                      </g>
                    </svg>
                  </button>
                </div>
                <div *ngIf="isFieldInvalid('confirmPassword')" class="text-red-300 text-xs mt-1">
                  <span *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">La confirmation du mot de
                    passe est requise</span>
                  <span *ngIf="registerForm.get('confirmPassword')?.errors?.['passwordMismatch']">Les mots de passe ne
                    correspondent pas</span>
                </div>
              </div>
            </div>

            <!-- Consent Checkbox -->
            <div>
              <label
                class="flex items-start gap-x-3 bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20">
                <input type="checkbox" formControlName="consent" [class]="
                        'h-4 w-4 text-yellow-400 focus:ring-yellow-400 border-white/30 rounded mt-1 ' +
                        (isFieldInvalid('consent') ? 'border-red-400' : '')
                      " />
                <span class="text-sm text-white/90 leading-relaxed">
                  Je donne librement mon consentement pour la collecte de
                  mes données personnelles
                  <span class="text-yellow-300">*</span>
                </span>
              </label>
              <div *ngIf="isFieldInvalid('consent')" class="text-red-300 text-xs mt-1">
                Vous devez accepter les conditions
              </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between">
              <button type="button" (click)="previousStep()"
                class="group bg-white/20 backdrop-blur-sm border border-white/30 text-white py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all duration-300 flex items-center gap-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 group-hover:-translate-x-1 transition-transform"
                  viewBox="0 0 24 24">
                  <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" d="m15 18l-6-6l6-6" />
                </svg>
                <span>Précédent</span>
              </button>

              <button type="submit" [disabled]="!registerForm.valid"
                class="group bg-gradient-to-r from-yellow-400 to-yellow-500 text-[#162233] py-3 px-6 rounded-xl font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24">
                  <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                    stroke-width="2" d="M20 6L9 17l-5-5" />
                </svg>
                <span>S'inscrire</span>
              </button>
            </div>
          </div>
        </form>

        <!-- Login Link -->
        <div class="mt-6 text-center">
          <p class="text-white/80">
            Vous avez déjà un compte ?
            <a routerLink="/auth/logusager" class="text-yellow-300 hover:text-yellow-400 font-medium transition-colors">
              Connectez-vous
            </a>
          </p>
        </div>

        <!-- Back to Home -->
        <div class="mt-4 text-center">
          <a routerLink="/"
            class="inline-flex items-center gap-x-2 text-white/60 hover:text-white transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24">
              <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="m12 19l-7-7l7-7m7 7H5" />
            </svg>
            <span class="text-sm">Retour à l'accueil</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
